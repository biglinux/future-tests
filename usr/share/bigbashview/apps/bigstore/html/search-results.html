<!-- FILEPATH: /usr/share/bigbashview/apps/bigstore/html/search-results.html -->
<!-- 
    This file contains the HTML template for displaying search results in the BigStore application.
    It includes a loop to iterate over the displayed items and render each item's information.
    The template also includes a scroll container, end of results message, and no results message.
-->
<template x-for="item in displayedItems">
    <div class="s12 m6 l4">
        <article class="cursor-alias onhover-elevate1 no-padding" x-on:click="showModal(item);" data-ui="#pkginfo">
            <div class="package-results">

                <!-- Left bar in results with different color by package type -->
                <div class="left-bar-package-results center-align" :class="{
                    'bgcolor-pkg-aur': item.t === 'a',
                    'bgcolor-pkg-native': item.t === 'p',
                    'bgcolor-pkg-flatpak': item.t === 'f',
                    'bgcolor-pkg-snap': item.t === 's',
                    'bgcolor-pkg-web': item.t === 'w'}">
                    <!-- Item Icon -->
                    <div class="package-results-icon" x-bind:x-on:show="fetchIcon(item)" x-html="item.iconHTML">
                    </div>

                    <!-- Package Format -->
                    <div class="small-opacity" x-html="packageFormat(item.t)"></div>



                    <!-- Install/Update/Remove Button -->
                    <div class="package-results-button">
                        <nav>
                            <template x-if="item.i === 'true' && item.u == '' ">
                                <button class="package-results-button-format tertiary red9"><i
                                        class="package-results-button-icon">delete</i><br><span class="small-opacity"
                                        stonejs>Remove</span></button>
                            </template>
                            <template x-if="item.u != null && item.u !== '' ">
                                <button class="package-results-button-format tertiary orange9"><i
                                        class="package-results-button-icon">update</i><br><span class="small-opacity"
                                        stonejs>Upgrade</span>
                                </button>
                            </template>
                            <template x-if="item.i !== 'true'">
                                <button class="package-results-button-format tertiary green8"><i
                                        class="package-results-button-icon">download</i><br><span class="small-opacity"
                                        stonejs>Install</span></button>
                            </template>
                        </nav>
                    </div>
                </div>
                <div class="right-bar-package-results">
                    <h5 class="small small-bottom-distance" x-text="formatTitle(item.p)"></h5>
                    <h6 class="small small-line no-margin" x-text="formatDescription(item.d)"></h6>
                </div>

                <!-- Item Version -->
                <div class="row medium-opacity absolute no-margin top right small-padding">
                    <label x-text="item.v"></label>
                </div>

                <!-- Item.t is type, a is Aur and p is Pacman -->
                <template x-if="item.u != '' && item.t == 'a'">
                    <div class="row medium-opacity absolute no-margin bottom right small-padding">
                        <!-- Show update version AUR -->
                        <span stonejs>Update: </span>
                        <div x-text="item.u"></div>
                    </div>
                </template>

                <!-- Item.t is type, a is Aur and p is Pacman -->
                <template x-if="item.t == 'p'">
                    <div class="row medium-opacity absolute no-margin bottom right small-padding">

                        <!-- Show repository -->
                        <div x-text="item.r"></div>

                        <!-- Show update version Pacman -->
                        <template x-if="item.u != ''">
                            <div x-text="item.u"></div>
                        </template>
                    </div>
                </template>
            </div>
        </article>
    </div>
</template>

<!-- Scroll Container -->
<div class="center-align" x-ref="scrollContainer">
    <div id="infinite-scroll-trigger"></div>
</div>

<!-- End of Results Message -->
<div class="center-align" x-show="search !== '' && this.endOfResults && displayedItems.length > 0">
    <p stonejs>Fim dos resultados</p>
</div>

<!-- No Results Message -->
<div class="center-align" x-show="search !== '' && displayedItems.length === 0">
    <p stonejs>Nenhum resultado</p>
</div>